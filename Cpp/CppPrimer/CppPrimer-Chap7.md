# 类

## 与本章有关联的其他章节

本章主要关注**数据抽象**。

- 第13章将讨论如何控制对象**拷贝、移动、赋值和销毁**等行为。（还会用到第12章动态内存的内容。）
- 第14章将学习如何自定义运算符。

类的**基本思想**是**数据抽象**和**封装**。

抽象数据类型：

本书中的`Sales_item`类就是一个抽象数据类型；（我们不能访问它的数据成员，而是通过接口来使用对象。）

而`Sales_data`类则不是一个抽象数据类型。（允许类的对象直接访问它的数据成员）

## 定义抽象数据类型

### 构造函数

#### 与本节有关的部分

P257：构造函数再探

P551:构造函数与**拷贝控制**

P689：函数`try`语句块与构造函数

#### 默认构造函数

当定义`Sales_data total;`时，我们并没有为这个对象提供初始值，那么他就执行默认构造函数。

如果我们没有定义构造函数，那么编译器就会为我们隐式地定义一个**默认构造函数**。（又被称为**合成的默认构造函数**。）

只有当类没有声明**任何**构造函数时，编译器才会自动地生成默认构造函数。

当我们定义了带参数的构造函数后，我们必须再定义一个默认构造函数，因为如果不定义，那么执行

```c++
Sales_data total;
```

时，将无法初始化`total`对象。

默认构造函数的含义：

```c++
Sales_data() = default;
```

因为已经定义了其他的构造函数，所以我们必须再定义一个默认构造函数，`=default`就是指执行需要默认的行为。这个函数的作用完全等同于之前的**合成默认构造函数**。

## 访问控制与封装

使用`class`和`struct`定义类唯一的区别就是默认访问权限：

- `struct`:默认`public`
- `class`：默认`private`

友元：

类可以允许其他类或者函数访问它的非公有成员，方法是令其他类或者函数成为它的友元。注意：是**类、函数**作为友元，不是类的成员。）如果把一个函数作为它的友元，只需要增加一条以`friend`关键字开始的**函数声明语句**即可：

```c++
friend Sales_data add(const Sales_data&, const Sales_data&);
```

## 类的其他特性

这些特性包括：

- 类型成员
- 类的成员的类内初始值
- 可变数据成员
- 内联成员函数
- 从成员函数返回`*this`
- 关于如何定义并使用类类型及友元类的更多知识



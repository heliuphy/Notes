# CppPrimer-Chap2
## 类型转换
### 自动类型转换

 1. 当给某种类型的对象强行赋予另一种类型的值时，比如：
 
 ```
 bool b = 42; //赋值后，cout << b ; 会得到 b = 1  （会自动将42转换为b的类型）
 int i = b; // i的值为1
 i = 3.14 // i的值为3
 double pi = i; //pi的值为3.0
 ```
 
 
 2. 当在程序的某处使用了一种算数类型的值而其实所需的是另一种类型的值时，比如：如果我们使用了一个非布尔值作为条件，那么它会自动被转换为布尔值，这和把非布尔值赋给布尔变量的操作完全一样。
 ```
 int i = 42;
 if (i) //if条件的值将为true
    i = 0;
 ```
 
## 变量
C++中，每个变量都有其数据类型，数据类型决定着变量所占内存空间的大小和布局方式、该空间能存储的值的范围，以及变量能参与的运算。

对程序员来说，
“变量(variable)”和“对象(object)”一般可互换使用。

### 变量定义
基本形式：
```
类型说明符 变量名列表
```
即，首先是类型说明符，随后紧跟一个或多个变量名组成的列表，其中变量名以逗号分隔。（更通用的描述，见“复合类型”部分）
### 变量声明和定义的关系
如果想声明一个变量而**非**定义它，就在变量名前添加关键字`extern`而不要显式地初始化变量：
```
extern int i; //声明i而非定义i
int j; //声明并定义j
```

## 复合类型
是指**基于其他类型**而定义的类型。C++有几种复合类型，例如：引用和指针。

**声明语句**更通用的描述是：一条声明语句由一个**基本数据类型**和紧随其后的一个**声明符列表**组成。每个声明符命名了一个变量并指定该变量为与基本数据类型**有关**的某种类型。（一般来讲，**声明符**就是**变量名**。）
### 引用
引用为对象起了另外一个名字，通过将**声明符**写成`&d`的形式来定义引用类型。
```
int ival = 1024;
int &refVal = ival; //refVal指向ival（是ival的另一个名字）
int &refVal2; //报错：引用必须被初始化
```
定义引用时，程序把引用和它的初值**绑定在一起**，而**不是拷贝**。一旦初始化，就**永远**绑定。（所以必须初始化）

**注：**引用即**别名**，引用并非对象，相反的，它只是为一个已经存在的对象所起的另外一个名字。定义了引用后，**对其进行的所有操作**都是在**与之绑定的对象上**进行的。
```
refVal = 2; //把2赋值给refVal指向的对象，即ival
int ii = refVal; //与ii = ival 执行结果一样
```
为引用赋值，实际上是把值赋给了**与引用绑定的对象**。获取引用的值，实际上是获取了**与引用绑定的对象**的值。

**注：**因为引用本身不是一个对象，所以**不能定义引用的引用**。

### 指针
指针与引用的不同：

 1. 指针本身就是一个对象
 2. 指针无需在定义时赋值

**注意：**某些符号有多重含义，像`&`和`*`这样的符号，既能用作表达式里的运算符，也能作为声明的一部分出现，符号的上下文决定了符号的意义：


```
int i = 42;
int &r = i; //&紧随类型名出线，因此是声明的一部分，r是一个引用
int *p; //*紧随类型名出线，因此是声明的一部分，p是一个指针
p = &i; //&出线在表达式中，是一个取地址符
*p = i; //*出现在表达式中，是一个解引用符
int &r2 = *p; //&是声明的一部分，*是一个解引用符
```

以前我就经常混淆，是不是`int *p = 2`就能把2赋值给`p`所指的对象，因为`*p`是解引用，这里就误解了此处`*`的含义。此处的`*`只是声明符的一部分，而不是解引用。
